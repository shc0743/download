<!DOCTYPE html>
<html lang=zh>
<head>
<meta charset=utf-8 name=viewport content="width=device-width">
<title>在线制作二维码</title>
<script src="/public/something/sometool.js"></script>
<script src="/public/something/other/dialog.js"></script>
</head>
<body>
<!--
API:
https://api.qrserver.com/v1/create-qr-code/?color=000000&bgcolor=FFFFFF&data=test&qzone=1&margin=0&size=1000x1000&ecc=H&format=png&download=1
-->
<h1>在线制作二维码</h1>
<form method=post action="make" id=makeform>
二维码内容: <textarea style="width:80%;" rows=6 placeholder="请输入内容"></textarea><br>
二维码背景颜色: <input type=color>或<input placeholder=手动输入><br>
二维码颜色: <input type=color>或<input placeholder=手动输入> <b>提示:</b> 请不要太接近背景颜色<br>
<button type=submit>制作</button>
</form>
<div id=continuelog title=Continue>
<span id=continuewait>Please wait...<br>
Now: <span id=continuenow>Check whether you are connected to the Internet</span><br></span>
<progress id=completeprog max=100 value=0></progress><span id=completeschedule>0</span>% Complete
</div>

<script>
continuelog.dialog({autoOpen:0,modal:1,width:"300px",hidex:1})
makeform.onsubmit=function(event){
event.preventDefault();
continuelog.dialog("open");
continuelog.innerHTML+="<img hidden src='https://www.w3school.com.cn/i/eg_mouse.jpg'"+
" onload='internetnormalornotsuccess(1)' onerror='internetnormalornotsuccess(0)' />"
}
function internetnormalornotsuccess(boo){
boo=(!!boo);
if(boo){
continuewait.hidden=1;
incrementcomplete(0);
} else {
continuewait.innerHTML="Unable to connect to the internet.<br><button onclick='this.parentElement.dialog(\"close\")'>Close</button>"
}
}
function incrementcomplete(a){
completeschedule.innerHTML=completeprog.value=a;
if(a!=100) setTimeout("incrementcomplete("+(a+1)+")",8);
if(a==100) nextMake();
}
</script>

</body>
</html>
